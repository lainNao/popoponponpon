---
title: "ReactとexpressとWebsocketでコピペチャット🥺"
cover: ""
date: "2020-09-11"
category: "日常"
tags:
    - 日常
---

純粋なコピー＆ペースト＋昔の記憶で↓<br><br>
![コピペチャットの画像](https://i.imgur.com/Pz7R1EN.jpg)
<br><br>
websocketを久しぶりに触った。重くなければ十分使い道あると思う。本当はストリーミングっぽいことしたいからさすがに重くなると思う。ストリーミングサーバとか聞いたことあるけどやってみようかな、なんかNAT超えとかのあれこれ必要なのかな。
<br><br>
とりあえず↑は配列に投稿内容を保存して、ルームは一つのデフォルト部屋に全員入れる感じだけど、複数の部屋を増殖させてマッチングさせるような仕組みは通常機能としてできるっぽい。socket.io使ってるけど。
<br><br>
別にルームってチャットだけじゃなくお絵かきもできるし、MIDIの送り合いとかもできるだろうし、でもそれならWebRTCの方が軽いイメージあるからうーん。SkywayのWebRTCでもいいんだろうけども、、、プロトタイプとか、ビジネスの方向浮かぶなら。自前のシグナリングサーバとか云々考えてみたけどイメージ的に無理っぽい知らんけどぴえん🥺
<br><br><br>
でこのチャットから何に派生させるかな<br>
とりあえず技術的挑戦として入力中フラグ作るか
<br><br>
フロント側からoninput中に1秒に一回くらい「入力中」フラグを送れば、サーバ側で入力中フラグをルームの人に送って、3秒間くらい入力中フラグが来なかったらsetTimeoutとかから「入力終了」フラグをルームの人に送ってあげればいけそう。setTimeoutがで入力終了フラグをつける前に新規で入力が来たらそのsetTimeoutがキャンセルされて新たなsetTimeoutが発火する感じかな…？🥺　こういう軽いのはググれば出てくるしやれば強引には必ずできるしニッチ要件すぎるからひとまずいいか🥺
<br><br>
なんか普遍的な面白いことがこれでできないかな。GPS的に近くにいる人同士でしか繋がらないとか。音声を送るとか。そうだアイデアいくつかあったからどれでもいいからやろう🥺