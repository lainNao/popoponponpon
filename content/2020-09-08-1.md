---
title: "考える🥺"
cover: ""
date: "2020-09-08"
category: "日常"
tags:
    - 日常
---

類似度について調べてても頭に入るとこ入らないところがあるので一人で考えてみる。
<br>
<br>
### 1次元の数の類似度は、距離の絶対値で分かる。abs(a,b)で分かる。
例えば年齢の類似度なら、完全に単にabs(a,b)やってそれが小さい人が類似してるって感じになるだろう。
<br>
<br>
それで言えば2次元の数の類似度はなんだろう。
これも距離が測れる。要するに↑の絶対値も一直線上の距離なので同じこと。
なんか三角関数使えば出せるはず。
例えば軽度緯度でAさんBさんCさんの位置が分かるデータがあるとして、近さを計算できるはず。
<br>
<br>
では3次元の数の類似度はなんだろう。
これも距離が計れる。同じだ。ここまでの類似度は単純に距離と言える。
重みつけてもいいかもだけど（どこかの座標だけ×2するとか、、、知らんけど）
<br>
<br>
では4次元の類似度はなんだ。
２つの(x,y,z,time)があるとする。それぞれ
x同士の距離は分かる。
x,y同士の距離は分かる。
x,y,z同士の距離も分かる。
x,y,z,timeの距離は…？timeは時間じゃなくてもなんでもいい。概念でもいい。
<br>
<br>
(x,y,z,とある0～1のなにか)だとする場合は。
これって、そもそも全部1次元の差と考えていいのではないか。
xとx、yとy、zとzそれぞれの絶対値の距離計れるよね。
それならば、次のカラムがなんであってもその距離を測ればいいだけ。
ただ、x,y,zはマイナス無限～プラス無限の範囲なのに対し、色は0～255の世界だったりするから、
そこはどうしたらいいんだろうね。
重みをつけないと、色の距離なんて消されちゃうよね。
<br>
<br>
分かった。
全部1次元と捉える方法があるということ。
そして、その場合範囲の違うカラムがある場合、そのカラムのノーマライズまたはあえての重み付けが必要。
つまり、ノーマライズしたら1次元でも無限次元でも類似度がわかる完全なn次元のデータとして扱える。
（ただし精度は高くないのかも知れない）
<br>
<br>
ノーマライズのやり方は手動でやればいい。
「色」「辛さ」とかの値の範囲が全然違いそうなカラムがある場合、
重み付けをしない場合、完全に揃えればいい。
どっちも0～1の範囲にしちゃえばいい。
で、たぶん実際のデータは色はrgb(a)、辛さは0～5とか。
rgbはまた3次元のデータとして捉えるのかそれとも、、、
それを0～1の範囲にどうにか納めるとして、、
辛さは単純に*0.2すればいいのが分かる。
すると、料理２つの類似度が出せるはず。
色の差がなるべく小さく、辛さの差もなるべく小さいもの、つまり単に「全カラムを走査し、差の合計が小さいもの」が近いものと言えると思う知らんけど。
<br>
<br>
これって別にディープラーニングとかでもなんでもないんだけど一体なんなんだろう。逆にディープラーニングではどうやって差を出しているのか。
<br>
<br>
一旦スルーする。
２つの(x,y,z)の三次元距離と、x,y,zそれぞれの絶対値を足して3で割った時の合計って、どう違うのか。
<br>https://talavax.com/math-distance3d.html<br>
ここを参考に、(60,20,5)と(10,40,20)の三次元の距離は55.90...らしい。
これを各次元の絶対値のみで考えると、xは50、yは20、zは15、合計は75、/3で25。距離は25。大幅に違う。
たぶん3次元の距離の方がより正確なのは、3次元の値という前提があるからだと思う。
これがx,y,zがそれぞれ次元が交叉もしてない「臭さ」「明るさ」「長さ」の数値だった場合やっぱりこれを3次元の距離で考えるのは違うと思う。
<br>
<br>
では性質の違うn次元の距離（類似度）ってなんだろう。
例えば出会い系ならぬマッチングアプリで考える。
家が近いとレコメンドされるんだろうけど、他にはパラメータは無いのか。そしてその重みはどう考えるの？
それはディープラーニングならなんでも解決とかいうわけじゃなくやっぱり人間が重み調整してるんじゃないのかな。
というか性質の違うデータをごちゃまぜで合計出してカラム数で割るというのはかなり雑だと思う。
やっぱりもっと本質的な計算を、人間が設定した重みとかでやるのが良いのかなと思う。
<br>
<br>
<br>
<br>
ということで2つのnカラムを持つデータの計算方法はひとまずは単純に、<br>
**1,ノーマライズする（多少重み付けする）**<br>
**2,値たちを合算してカラム数で割る**<br>
で最終的な数が少なければ少ないほど類似してるという単純な方式が一個あるんだおろうなとは思った。<br>
**類似度は要は距離だと**（知らんけど）<br>
でもこれってif文とfor文だよね
<br>
<br>
じゃあ<br>
**1,ディープラーニングはどうやってるの（レコメンドとかいい感じに見えるけど画期的なことしてるのかな）**<br>
**2,他には類似度計算する方法何あるの**<br>
**3,性質の違うカラム達が並ぶcsvの行同士の類似度を出すのはどうやるの**<br>
**4,そもそも「商品Xとの類似度」をすべての商品が持ってる場合レコード数がすごいことになるだろうけどそこらへんどうやってんの<br>
ここらへんが謎だということでまた、、
